// Generated by CoffeeScript 1.6.3
(function() {
  var launchConsole, launchSocket;

  launchConsole = function(socket) {
    var handler, write_response;
    window.jqconsole = $('#console').jqconsole('', '> ');
    jqconsole.RegisterShortcut('Z', function() {
      jqconsole.AbortPrompt();
      return handler();
    });
    jqconsole.RegisterShortcut('A', function() {
      jqconsole.MoveToStart();
      return handler();
    });
    jqconsole.RegisterShortcut('E', function() {
      jqconsole.MoveToEnd();
      return handler();
    });
    jqconsole.RegisterMatching('{', '}', 'brace');
    jqconsole.RegisterMatching('(', ')', 'paran');
    jqconsole.RegisterMatching('[', ']', 'bracket');
    handler = function(command) {
      if (command) {
        return socket.emit('eval request', {
          message: command
        });
      }
    };
    write_response = function(response) {
      jqconsole.Write(response.message);
      return jqconsole.Prompt(true, handler);
    };
    socket.on('eval response', function(data) {
      console.log('received: \n' + data.message);
      return write_response(data);
    });
    jqconsole.Prompt(true, handler);
    return jqconsole;
  };

  launchSocket = function() {
    var socket;
    socket = io.connect('http://localhost:3000');
    return socket.on('connect', function() {
      launchConsole(socket);
      return console.log('connected');
    });
  };

  $(function() {
    return launchSocket();
  });

}).call(this);
